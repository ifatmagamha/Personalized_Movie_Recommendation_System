# Screen Flow - Quick Reference

## ğŸ—ºï¸ Visual Navigation Map

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   1. HOME SCREEN    â”‚
                    â”‚  "(Maybe THIS.)"    â”‚
                    â”‚                     â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚ Tell us how     â”‚ â”‚
                    â”‚ â”‚ you're feeling  â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
                    â”‚ â”‚ I just need     â”‚ â”‚
                    â”‚ â”‚ something       â”‚ â”‚
                    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚      â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                â”‚
              â–¼                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2. MOOD INPUT       â”‚          â”‚  3. EXPLORE FILTERS  â”‚
â”‚                      â”‚          â”‚                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚          â”‚  [Popular/Personal]  â”‚
â”‚  â”‚ Type mood...   â”‚  â”‚          â”‚                      â”‚
â”‚  â”‚ "lonely 3am"   â”‚  â”‚          â”‚  âœ“ Drama    + -      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚          â”‚  âœ“ Romance  + -      â”‚
â”‚  ğŸ¤ Voice Input      â”‚          â”‚  âœ— Horror   + -      â”‚
â”‚                      â”‚          â”‚                      â”‚
â”‚  [Submit]            â”‚          â”‚  Rating:  âš«â”€â”€â”€â”€â”€â—‹   â”‚
â”‚                      â”‚          â”‚                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚  [Show Results]      â”‚
           â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚  AI Mood Parser               â”‚
           â”‚  Detects emotions             â”‚  Manual Filters
           â”‚  Scores movies                â”‚  Include/Exclude
           â”‚                               â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
                       â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   5. RESULTS        â”‚
              â”‚   Swipe Cards       â”‚
              â”‚                     â”‚
              â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
              â”‚   â”‚   Movie 1   â”‚   â”‚ â† Top card (swipeable)
              â”‚   â”‚  [Poster]   â”‚   â”‚
              â”‚   â”‚   Title     â”‚   â”‚
              â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
              â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚ â† Card 2
              â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚ â† Card 3
              â”‚                     â”‚
              â”‚   âœ—    ğŸ’¾    â¤ï¸     â”‚
              â”‚ Dislike Save Like   â”‚
              â”‚                     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ Click card
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚  MOVIE DETAIL       â”‚
              â”‚  (Modal Overlay)    â”‚
              â”‚                     â”‚
              â”‚  [Poster] Synopsis  â”‚
              â”‚           Year      â”‚
              â”‚           Duration  â”‚
              â”‚           Cast      â”‚
              â”‚           Rating    â”‚
              â”‚                     â”‚
              â”‚  [Save] [Like] [Ã—]  â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ Entry Points from Home

| Button | Action | Leads To | Purpose |
|--------|--------|----------|---------|
| **"tell us how you're feeling"** | Emotion input | Mood Input â†’ Results | AI-powered recommendations |
| **"i just need something"** | Quick browse | Explore Filters â†’ Results | Manual filter selection |

---

## ğŸ“Š Screen Data Requirements

### Home Screen
```typescript
Props: None
State: None
Data: None
```

### Mood Input Screen
```typescript
Props:
  - onSubmit(input: string, isVoice: boolean)
  - onBack()

Internal State:
  - input: string (user's typed text)
  - isRecording: boolean (voice input active)

Output Data:
  â†’ moodInput: "lonely at 3am"
  â†’ isVoiceInput: true/false
  â†’ recommendedMovies: Movie[] (AI-filtered, top 10)
```

### Explore Filters Screen
```typescript
Props:
  - onApplyFilters(filters: FilterState)
  - onBack()

Internal State:
  - selectedGenres: string[]
  - excludedGenres: string[]
  - minRating: number
  - isPersonalized: boolean

Output Data:
  â†’ moodInput: "Filtered results"
  â†’ recommendedMovies: Movie[] (filtered, up to 12)
```

### Results Screen
```typescript
Props:
  - movies: Movie[] (incoming recommendations)
  - moodInput: string (original mood/filter label)
  - isVoice: boolean
  - onSelectMovie(movie: Movie)
  - onBack()

Internal State:
  - currentIndex: number (which card)
  - savedMovies: Set<string>
  - likedMovies: string[]
  - dislikedMovies: string[]

Output Data:
  â†’ selectedMovie: Movie (for detail modal)
```

### Movie Detail Modal
```typescript
Props:
  - movie: Movie (selected movie)
  - onClose()
  - onFeedback(movieId: string, type: 'helpful' | 'not-helpful')

Internal State:
  - saved: boolean

Output Data:
  â†’ Feedback data (for backend)
```

---

## ğŸ”„ State Flow Diagram

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   APP STATE      â”‚
                    â”‚                  â”‚
                    â”‚ currentScreen    â”‚â”€â”€â”
                    â”‚ selectedMovie    â”‚  â”‚
                    â”‚ moodInput        â”‚  â”‚ Controls what
                    â”‚ recommendedMoviesâ”‚  â”‚ screen renders
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                              â”‚           â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                                      â”‚
              â–¼                                      â–¼
    USER INTERACTION                        COMPONENT RENDER
    (clicks, swipes, types)                 (based on state)
              â”‚                                      â”‚
              â”‚                                      â”‚
              â–¼                                      â”‚
    EVENT HANDLER                                    â”‚
    (onMoodInput, onApplyFilters, etc.)             â”‚
              â”‚                                      â”‚
              â”‚                                      â”‚
              â–¼                                      â”‚
    STATE UPDATE                                     â”‚
    (setCurrentScreen, setMovies, etc.)             â”‚
              â”‚                                      â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âš¡ Key User Flows

### Flow A: "I'm lonely at 3am"
```
1. HOME
   â†“ Click "tell us how you're feeling"
2. MOOD INPUT
   â†“ Type "lonely at 3am vibes" + Submit
   â†’ AI detects moods: [lonely, melancholic, contemplative]
   â†’ Scores all movies for mood match
   â†’ Returns top 10: mostly Drama/Romance with quiet moods
3. RESULTS
   â†“ Browse 10 swipe cards
   â†“ Swipe right on "Eternal Echoes" (melancholic romance)
   â†“ Click card to see details
4. MOVIE DETAIL
   â†“ Read synopsis, see it's 108min, contemplative mood
   â†“ Click Save
   â†“ Close modal
   â†“ Continue swiping through recommendations
```

### Flow B: "I want thriller but not horror"
```
1. HOME
   â†“ Click "i just need something"
2. EXPLORE FILTERS
   â†“ Click Thriller (+)
   â†“ Click Horror (-)
   â†“ Set minimum rating to 7.5
   â†“ Toggle to "Popular"
   â†“ Click "Show Results"
   â†’ Filters to Drama/Thriller, excludes Horror
   â†’ Sorts by rating descending
   â†’ Returns top 12 matches
3. RESULTS
   â†“ Browse filtered swipe cards
   â†“ All cards are Thriller without Horror elements
```

### Flow C: "Just show me something good"
```
1. HOME
   â†“ Click "i just need something"
2. EXPLORE FILTERS
   â†“ Don't select any genres (all allowed)
   â†“ Set minimum rating to 8.5
   â†“ Toggle to "Popular"
   â†“ Click "Show Results"
   â†’ Returns highest-rated movies only
3. RESULTS
   â†“ See only movies rated 8.5+
```

---

## ğŸ¬ Swipe Card Mechanics

### Card Stack Display
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â† Card 1 (z-index: 30, fully interactive)
â”‚     MOVIE 1     â”‚   
â”‚                 â”‚   
â”‚   [Poster]      â”‚   Swipe Right â†’ Like (pink heart)
â”‚                 â”‚   Swipe Left  â†’ Dislike (blue X)
â”‚   Title         â”‚   Click       â†’ Detail Modal
â”‚   â˜… 8.7         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â† Card 2 (z-index: 20, static, scaled 95%)
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â† Card 3 (z-index: 10, static, scaled 90%)
```

### Swipe Thresholds
- **Drag distance:** 100px horizontal triggers auto-complete
- **Visual feedback:** 
  - Heart opacity: 0 â†’ 1 as drag right
  - X opacity: 0 â†’ 1 as drag left
  - Card rotation: -15Â° to +15Â° based on drag
- **Physics:** Spring animation on release

### Button Actions
| Button | Icon | Color | Action |
|--------|------|-------|--------|
| Dislike | âœ— | Blue | Same as swipe left |
| Save | ğŸ’¾ | White | Bookmark (stays in stack) |
| Like | â¤ï¸ | Pink | Same as swipe right |

---

## ğŸ§  AI Mood Parser Logic

### Pattern Detection
```typescript
Input: "feeling lonely at 3am can't sleep"

Detected Patterns:
  âœ“ "lonely" â†’ [lonely, melancholic, contemplative]
  âœ“ "3am" â†’ [contemplative, calm]
  âœ“ "can't sleep" â†’ [contemplative, calm, peaceful]

Combined Moods: [lonely, melancholic, contemplative, calm, peaceful]

Scoring Movies:
  "Eternal Echoes" (Drama/Romance)
    - mood: [melancholic, romantic, lonely, peaceful]
    - Match: lonely(+3), melancholic(+3), peaceful(+3) = 9 points
    - Genre: Drama matches melancholic mood (+2)
    - Rating: 8.7 (+1 bonus)
    - TOTAL: 12 points â­

  "Drive Nowhere" (Thriller)
    - mood: [tense, cool, focused, anxious]
    - Match: 0 points (no mood overlap)
    - TOTAL: 0 points (filtered out)

Results: Top 10 highest scoring movies
```

### Intent Pattern Examples
| Input | Detected Intent | Mapped Moods |
|-------|----------------|--------------|
| "broke up with someone" | Heartbreak | sad, melancholic, reflective |
| "need a laugh" | Comedy request | happy, light, playful |
| "can't sleep" | Insomnia | contemplative, calm, peaceful |
| "feeling weird tonight" | Experimental | curious, contemplative |
| "3am vibes" | Late night | contemplative, melancholic |
| "stressed from work" | Anxiety relief | peaceful, calm, relaxed |

---

## ğŸ”™ Back Navigation Rules

All screens follow this pattern:
```typescript
// Top-left corner always has back button
<button onClick={onBack} className="...">
  <ArrowLeft /> Back
</button>

// All onBack handlers return to home
onBack={() => setCurrentScreen('home')}
```

**Exception:** Movie Detail Modal
- Close button (X) in top-right
- Closes modal, returns to previous screen
- Backdrop click also closes

---

## ğŸ’¾ Data Persistence Points

### Currently Session-Only
- Liked movies
- Disliked movies
- Saved movies
- Current swipe position
- Filter selections

### Could Persist (with Backend)
```typescript
// After each action
await fetch('/api/user/actions', {
  method: 'POST',
  body: JSON.stringify({
    movieId: movie.id,
    action: 'like' | 'dislike' | 'save',
    timestamp: Date.now(),
    context: moodInput, // What led to this movie
  })
});

// Load on app init
const savedData = await fetch('/api/user/saved-movies');
setSavedMovies(new Set(savedData.movieIds));
```

---

## ğŸ¨ Visual Feedback Summary

### Screen Transitions
- **Type:** Fade + slide
- **Duration:** 0.3s
- **Easing:** Ease-in-out

### Card Swipes
- **Type:** Physics-based drag
- **Spring:** Stiffness 300, damping 30
- **Indicators:** Fade in during drag

### Button Hovers
- **Border:** Glow effect (neon accent)
- **Background:** Subtle color wash
- **Duration:** 0.2s

### Modal
- **Backdrop:** Fade to black/60
- **Content:** Slide up + fade
- **Duration:** 0.4s

---

## ğŸ“± Responsive Considerations

### Mobile (< 768px)
- Single column layouts
- Full-screen swipe cards
- Bottom sheet for filters
- Larger touch targets

### Desktop (â‰¥ 768px)
- Centered content (max-width)
- Two-column Movie Detail
- Hover states active
- Keyboard shortcuts possible

---

## âš ï¸ Edge Cases Handled

| Situation | Behavior |
|-----------|----------|
| No movies match filter | Show empty state, button to go back |
| AI finds no mood match | Return top 8 rated movies as fallback |
| User swipes through all cards | Show "maybe this again" button to restart |
| Empty mood input | Prevent submit or use default moods |
| Network error on voice input | Fall back to text input |

---

## ğŸš€ Quick Integration Checklist

- [ ] Connect Home screen navigation handlers
- [ ] Wire up Mood Input AI parser to backend (or use client-side)
- [ ] Connect Explore Filters to movie filtering logic
- [ ] Set up Results screen with swipe handlers
- [ ] Configure Movie Detail modal with save/feedback API
- [ ] Add AnimatePresence wrapper for smooth transitions
- [ ] Test all back navigation paths return to Home
- [ ] Verify modal opens/closes correctly from any screen

---

## ğŸ¯ Summary

**5 Main Screens:**
1. Home (hub)
2. Mood Input (AI entry)
3. Explore Filters (manual entry)
4. Results (swipe interface)
5. Movie Detail (modal overlay)

**2 Recommendation Paths:**
- Emotion-first (AI mood parsing)
- Control-first (manual filters)

**1 Interaction Model:**
- Hub-and-spoke navigation
- All roads lead back to Home
- Modal overlay for details

**Core Flow:**
`Home â†’ (Mood OR Filters) â†’ Results â†’ Detail â†’ Repeat`
